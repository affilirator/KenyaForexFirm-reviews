---
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
import { CalendarDays, Clock } from 'lucide-react';

interface Props {
  authorName: string;
  authorImage?: string;
  publishedDate: string;
  lastModified?: string;
  readTime?: string;
}

const { authorName, authorImage, publishedDate, lastModified, readTime } =
  Astro.props;

const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });
};
---

<div class="flex items-center gap-4 py-4 border-b border-border/50">
  <Avatar className="h-12 w-12">
    <AvatarImage
      src={authorImage}
      alt={authorName}
    />
    <AvatarFallback
      >{
        authorName
          .split(' ')
          .map((n) => n[0])
          .join('')
      }</AvatarFallback
    >
  </Avatar>

  <div class="flex-1">
    <div
      class="flex flex-wrap items-center gap-4 text-sm text-muted-foreground"
    >
      <span class="font-medium text-foreground">By {authorName}</span>

      <div class="flex items-center gap-1">
        <CalendarDays className="h-4 w-4" />
        <time datetime={publishedDate}>
          {formatDate(publishedDate)}
        </time>
      </div>

      {
        lastModified && (
          <div class="flex items-center gap-1">
            <Clock className="h-4 w-4" />
            <span>Updated {formatDate(lastModified)}</span>
          </div>
        )
      }

      {readTime && <span>{readTime} min read</span>}
    </div>
  </div>
</div>
