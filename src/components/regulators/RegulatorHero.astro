---
// RegulatorHero.astro - Hero section for regulator pages
import RichTextRenderer from './RichTextRenderer.astro';

interface Props {
  heading: string;
  subheading?: string;
  introduction: any; // Rich text content
  heroImage?: {
    url: string;
    alt: string;
  };
  showTableOfContents?: boolean;
}

const { 
  heading, 
  subheading, 
  introduction, 
  heroImage, 
  showTableOfContents = true 
} = Astro.props;
---

<section class="bg-gradient-to-br from-neutral-50 via-neutral-50 to-primary-100/20 py-16 px-4 sm:px-6 lg:px-8 relative overflow-hidden">
  <div class="absolute top-0 left-0 right-0 h-0.5 bg-primary-500"></div>
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_top_right,rgba(56,189,248,0.08),transparent_50%)]">
  </div>
  <div class="max-w-7xl mx-auto relative z-10">
    <div class="flex flex-col md:flex-row gap-12 items-center">
      <div class={`${heroImage ? 'md:w-3/5' : 'w-full'} space-y-7`}>
        <div class="inline-block">
          <span class="bg-primary-500/10 text-primary-600 px-3 py-1 rounded-full text-sm font-medium border border-primary-500/20 inline-flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
            Regulatory Information
          </span>
        </div>
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-neutral-900 leading-tight font-display tracking-tight">
          <span class="relative inline-block">
            <span class="relative z-10">{heading}</span>
            <span class="absolute bottom-1 left-0 w-full h-2 bg-primary-400/20 -z-10"></span>
          </span>
        </h1>
        
        {subheading && (
          <p class="text-xl md:text-2xl text-neutral-700 font-serif leading-relaxed">
            {subheading}
          </p>
        )}
        
        <div class="prose prose-lg max-w-none text-neutral-800">
          <RichTextRenderer content={introduction} />
        </div>
      </div>
      
      {heroImage && (
        <div class="md:w-2/5 relative group">
          <div class="absolute inset-0 border border-primary-500/20 rounded-lg"></div>
          <img 
            src={heroImage.url} 
            alt={heroImage.alt || 'Regulator hero image'} 
            class="relative rounded-lg w-full h-auto object-cover border border-neutral-200 group-hover:scale-[1.01] transition-transform duration-300"
          />
        </div>
      )}
    </div>
    
    {showTableOfContents && (
      <div class="mt-12 bg-white/80 rounded-lg border border-neutral-200 p-5 relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-0.5 bg-primary-500"></div>
        <h2 class="text-lg font-medium mb-3 text-neutral-800 font-display flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />
          </svg>
          On this page
        </h2>
        <div class="toc-container">
          <!-- Table of contents will be populated by JavaScript -->
          <div id="table-of-contents" class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-1.5"></div>
        </div>
      </div>
    )}
  </div>
</section>

<script src="/src/scripts/tocEnhanced.js"></script>